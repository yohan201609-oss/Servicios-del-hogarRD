# üî• Actualizar Configuraciones de Firebase

Esta gu√≠a te ayudar√° a actualizar las configuraciones de Firebase con las claves reales de tus proyectos.

## üìã Prerrequisitos

- Proyectos Firebase creados en Firebase Console
- Aplicaciones Android e iOS registradas
- Archivos de configuraci√≥n descargados

## üõ†Ô∏è Paso a Paso

### Paso 1: Obtener Claves de Firebase Console

#### 1.1 Para Proyecto DEV (`servicios-hogar-rd-dev`)
1. Ve a [Firebase Console](https://console.firebase.google.com/)
2. Selecciona el proyecto **servicios-hogar-rd-dev**
3. Ve a **Project Settings** (√≠cono de engranaje)
4. En la pesta√±a **General**, encuentra:
   - **Project ID**: `servicios-hogar-rd-dev`
   - **Web API Key**: `AIzaSy...` (copia esta clave)
   - **Sender ID**: `607113121137` (o el n√∫mero que aparezca)

#### 1.2 Para Proyecto STAGING (`servicios-hogar-rd-staging`)
1. Selecciona el proyecto **servicios-hogar-rd-staging**
2. Repite el proceso anterior
3. Anota las claves espec√≠ficas de este proyecto

#### 1.3 Para Proyecto PROD (`servicios-hogar-rd-prod`)
1. Selecciona el proyecto **servicios-hogar-rd-prod**
2. Repite el proceso anterior
3. Anota las claves espec√≠ficas de este proyecto

### Paso 2: Actualizar `lib/firebase_options_dev.dart`

```dart
// File generated by FlutterFire CLI.
// ignore_for_file: type=lint
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps in DEVELOPMENT.
class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      case TargetPlatform.windows:
        return windows;
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'TU_API_KEY_DEV_WEB_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:web:servicios-hogar-rd-dev',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-dev',
    authDomain: 'servicios-hogar-rd-dev.firebaseapp.com',
    storageBucket: 'servicios-hogar-rd-dev.firebasestorage.app',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'TU_API_KEY_DEV_ANDROID_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:android:com.app.hogar.dev',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-dev',
    storageBucket: 'servicios-hogar-rd-dev.firebasestorage.app',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'TU_API_KEY_DEV_IOS_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:ios:com.app.hogar.dev',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-dev',
    storageBucket: 'servicios-hogar-rd-dev.firebasestorage.app',
    iosBundleId: 'com.app.hogar.dev',
  );

  static const FirebaseOptions macos = FirebaseOptions(
    apiKey: 'TU_API_KEY_DEV_IOS_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:ios:com.app.hogar.dev',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-dev',
    storageBucket: 'servicios-hogar-rd-dev.firebasestorage.app',
    iosBundleId: 'com.app.hogar.dev',
  );

  static const FirebaseOptions windows = FirebaseOptions(
    apiKey: 'TU_API_KEY_DEV_WEB_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:web:servicios-hogar-rd-dev',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-dev',
    authDomain: 'servicios-hogar-rd-dev.firebaseapp.com',
    storageBucket: 'servicios-hogar-rd-dev.firebasestorage.app',
  );
}
```

### Paso 3: Actualizar `lib/firebase_options_staging.dart`

```dart
// File generated by FlutterFire CLI.
// ignore_for_file: type=lint
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps in STAGING.
class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      case TargetPlatform.windows:
        return windows;
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'TU_API_KEY_STAGING_WEB_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:web:servicios-hogar-rd-staging',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-staging',
    authDomain: 'servicios-hogar-rd-staging.firebaseapp.com',
    storageBucket: 'servicios-hogar-rd-staging.firebasestorage.app',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'TU_API_KEY_STAGING_ANDROID_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:android:com.app.hogar.staging',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-staging',
    storageBucket: 'servicios-hogar-rd-staging.firebasestorage.app',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'TU_API_KEY_STAGING_IOS_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:ios:com.app.hogar.staging',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-staging',
    storageBucket: 'servicios-hogar-rd-staging.firebasestorage.app',
    iosBundleId: 'com.app.hogar.staging',
  );

  static const FirebaseOptions macos = FirebaseOptions(
    apiKey: 'TU_API_KEY_STAGING_IOS_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:ios:com.app.hogar.staging',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-staging',
    storageBucket: 'servicios-hogar-rd-staging.firebasestorage.app',
    iosBundleId: 'com.app.hogar.staging',
  );

  static const FirebaseOptions windows = FirebaseOptions(
    apiKey: 'TU_API_KEY_STAGING_WEB_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:web:servicios-hogar-rd-staging',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-staging',
    authDomain: 'servicios-hogar-rd-staging.firebaseapp.com',
    storageBucket: 'servicios-hogar-rd-staging.firebasestorage.app',
  );
}
```

### Paso 4: Actualizar `lib/firebase_options_prod.dart`

```dart
// File generated by FlutterFire CLI.
// ignore_for_file: type=lint
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps in PRODUCTION.
class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      case TargetPlatform.windows:
        return windows;
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'TU_API_KEY_PROD_WEB_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:web:servicios-hogar-rd-prod',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-prod',
    authDomain: 'servicios-hogar-rd-prod.firebaseapp.com',
    storageBucket: 'servicios-hogar-rd-prod.firebasestorage.app',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'TU_API_KEY_PROD_ANDROID_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:android:com.app.hogar',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-prod',
    storageBucket: 'servicios-hogar-rd-prod.firebasestorage.app',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'TU_API_KEY_PROD_IOS_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:ios:com.app.hogar',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-prod',
    storageBucket: 'servicios-hogar-rd-prod.firebasestorage.app',
    iosBundleId: 'com.app.hogar',
  );

  static const FirebaseOptions macos = FirebaseOptions(
    apiKey: 'TU_API_KEY_PROD_IOS_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:ios:com.app.hogar',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-prod',
    storageBucket: 'servicios-hogar-rd-prod.firebasestorage.app',
    iosBundleId: 'com.app.hogar',
  );

  static const FirebaseOptions windows = FirebaseOptions(
    apiKey: 'TU_API_KEY_PROD_WEB_AQUI', // Reemplaza con la clave real
    appId: '1:TU_PROJECT_NUMBER:web:servicios-hogar-rd-prod',
    messagingSenderId: 'TU_MESSAGING_SENDER_ID',
    projectId: 'servicios-hogar-rd-prod',
    authDomain: 'servicios-hogar-rd-prod.firebaseapp.com',
    storageBucket: 'servicios-hogar-rd-prod.firebasestorage.app',
  );
}
```

## üß™ Verificar Configuraci√≥n

### Verificar que las Claves sean Correctas
```dart
// En main.dart, la aplicaci√≥n mostrar√° autom√°ticamente:
FirebaseConfig.printDebugInfo();
```

### Verificar Conexi√≥n a Firebase
```dart
// Agregar en main.dart para verificar conexi√≥n
try {
  await Firebase.initializeApp(options: FirebaseConfig.currentOptions);
  print('‚úÖ Firebase conectado correctamente');
  print('Proyecto: ${FirebaseConfig.currentProjectId}');
} catch (e) {
  print('‚ùå Error conectando a Firebase: $e');
}
```

## üöÄ Comandos de Build

### Android
```bash
# Desarrollo
flutter build apk --flavor dev --dart-define=ENVIRONMENT=development

# Staging
flutter build apk --flavor staging --dart-define=ENVIRONMENT=staging

# Producci√≥n
flutter build apk --flavor prod --dart-define=ENVIRONMENT=production
```

### iOS
```bash
# Desarrollo
flutter build ios --flavor dev --dart-define=ENVIRONMENT=development

# Staging
flutter build ios --flavor staging --dart-define=ENVIRONMENT=staging

# Producci√≥n
flutter build ios --flavor prod --dart-define=ENVIRONMENT=production
```

### Web
```bash
# Desarrollo
flutter build web --dart-define=ENVIRONMENT=development

# Staging
flutter build web --dart-define=ENVIRONMENT=staging

# Producci√≥n
flutter build web --dart-define=ENVIRONMENT=production
```

## üîç Testing de Configuraci√≥n

### Probar en Desarrollo
```bash
# Android
flutter run --flavor dev --dart-define=ENVIRONMENT=development

# iOS
flutter run --flavor dev --dart-define=ENVIRONMENT=development

# Web
flutter run --dart-define=ENVIRONMENT=development
```

### Verificar Logs de Firebase
En la consola deber√≠as ver:
```
üî• Firebase Configuration:
  Environment: development
  Project ID: servicios-hogar-rd-dev
  Valid: true
  API Key: AIzaSyBrNE...
  App ID: 1:607113121137:android:com.app.hogar.dev
```

## üö® Soluci√≥n de Problemas

### Error: "Firebase project not found"
- Verifica que el `projectId` sea correcto
- Verifica que el proyecto exista en Firebase Console

### Error: "Invalid API key"
- Verifica que la `apiKey` sea correcta
- Verifica que la clave sea para la plataforma correcta (Android/iOS/Web)

### Error: "App not found"
- Verifica que el `appId` sea correcto
- Verifica que la aplicaci√≥n est√© registrada en Firebase Console

### Error de Build
```bash
# Limpiar y reconstruir
flutter clean
flutter pub get
flutter build apk --flavor dev --dart-define=ENVIRONMENT=development
```

## ‚úÖ Checklist de Actualizaci√≥n

- [ ] Proyectos Firebase creados en Console
- [ ] Aplicaciones Android e iOS registradas
- [ ] Claves obtenidas de Firebase Console
- [ ] `firebase_options_dev.dart` actualizado
- [ ] `firebase_options_staging.dart` actualizado
- [ ] `firebase_options_prod.dart` actualizado
- [ ] Configuraci√≥n verificada con logs
- [ ] Builds probados para cada entorno
- [ ] Conexi√≥n Firebase verificada

¬°Con esta configuraci√≥n tendr√°s Firebase funcionando correctamente en todos los entornos! üéâ
